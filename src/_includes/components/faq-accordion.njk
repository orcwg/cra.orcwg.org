{#
  FAQ Accordion Component

  Parameters (set via componentData variable):
  - title: Section title to display
  - faqs: Array of FAQ item objects
  - categoryClass: Optional CSS class for styling variations
  - description: Optional description text
  - icon: Optional icon to display before title

  Usage Example:
  {% set componentData = {
    title: "Advanced Topics",
    faqs: faqItems,
    description: "Frequently asked questions about advanced topics"
  } %}
  {% include "components/faq-accordion.njk" %}
#}

<section class="faq-category faq-category--accordion{{ ' ' + componentData.categoryClass if componentData.categoryClass }}">
  <h2 class="category-title">
    {% if componentData.icon %}
      <span class="category-icon">{{ componentData.icon }}</span>
    {% endif %}
    {{ componentData.title }}
  </h2>
  {% if componentData.description %}
    <p class="category-description">{{ componentData.description }}</p>
  {% endif %}

  <div class="faq-items">
    {% for faq in componentData.faqs %}
      <div class="faq-item" data-faq-key="{{ faq.filename | replace('.md', '') }}">
        <button class="faq-trigger" onclick="toggleAccordion(this)">
          <span class="question-text">{{ faq.question | markdownInline | safe }}</span>
          <span class="accordion-icon">‚ñº</span>
          {% include "components/faq-badges.njk" %}
        </button>

        <div class="faq-content">
          <div class="faq-answer">
            {{ faq.answer | markdown | safe }}

            {% if faq.status == "draft" or faq.guidanceItem %}
            <aside class="faq-warnings">
              {% if faq.status == "draft" %}
              <div class="faq-warning">
                <p><strong>This FAQ is a draft</strong> - it hasn't been reviewed by the FAQ Task Force. The answer may be incomplete or incorrect.</p>
              </div>
              {% endif %}

              {% if faq.guidanceItem %}
              <div class="faq-warning faq-guidance">
                <p><strong>Pending Guidance</strong></p>
                {% if faq.guidanceItem.guidanceText %}
                  <div class="guidance-content">
                    <p>This FAQ awaits commission guidance on:</p>
                    <p class="guidance-phrase">{{ faq.guidanceItem.guidanceText | truncate(300) }}</p>
                  </div>
                  <div class="guidance-actions">
                    <a href="{{ faq.guidanceItem.permalink }}" class="guidance-link">View full guidance request ‚Üí</a>
                  </div>
                {% else %}
                  <p>This FAQ awaits commission guidance.</p>
                {% endif %}
              </div>
              {% endif %}
            </aside>
            {% endif %}
          </div>

          <div class="faq-admin-info" style="display: none">
            {% if faq["guidance-id"] %}
            <div class="pending-guidance-link">
              <strong>üõë Related Pending Guidance:</strong> <a href="{{ faq.guidanceItem.permalink }}">{{ faq["guidance-id"] | replace('-', ' ') | title }}</a>
              <p><em>This FAQ is affected by pending guidance that is currently being developed.</em></p>
            </div>
            {% endif %}

            {% if faq["Related issue"] %}
            <div class="related-issue">
              <strong>Related issue:</strong> <a href="{{ faq["Related issue"] }}">{{ faq["Related issue"] }}</a>
            </div>
            {% endif %}

            <div class="edit-on-github">
              <span class="edit-icon">‚úèÔ∏è</span>
              <a href="https://github.com/orcwg/cra-hub/edit/main/faq/{{ faq.category }}/{{ faq.filename }}" target="_blank" rel="noopener">Edit this FAQ on GitHub</a>
            </div>

            <div class="faq-link">
              <a href="{{ faq.permalink }}" class="standalone-link">üìÑ View standalone page</a>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</section>
