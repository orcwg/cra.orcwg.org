{#
  Reusable FAQ List Component

  Parameters (set via componentData variable):
  - title: Section title to display
  - faqs: Array of FAQ item objects
  - mode: Display mode - "list" (default) or "accordion"
  - showAdminIndicators: Optional boolean to show admin indicators (default: false)
  - categoryClass: Optional CSS class for styling variations

  Usage Examples:

  1. Basic list mode (default):
  {% set componentData = {
    title: "Getting Started",
    faqs: faqItems,
    mode: "list"
  } %}
  {% include "components/faq-list.njk" %}

  2. Accordion mode:
  {% set componentData = {
    title: "Advanced Topics",
    faqs: faqItems,
    mode: "accordion",
    showAdminIndicators: true
  } %}
  {% include "components/faq-list.njk" %}

  3. List mode with custom styling:
  {% set componentData = {
    title: "Special Category",
    faqs: specialFaqs,
    mode: "list",
    categoryClass: "special-category"
  } %}
  {% include "components/faq-list.njk" %}
#}

{% set mode = componentData.mode or "list" %}
{% set isAccordion = mode == "accordion" %}

<section class="faq-category faq-category--{{ mode }}{{ ' ' + componentData.categoryClass if componentData.categoryClass }}">
  <h2 class="category-title">{{ componentData.title }}</h2>

  <div class="faq-items">
    {% for item in componentData.faqs %}
      <div class="faq-item"{% if isAccordion %} data-faq-key="{{ item.filename | replace('.md', '') }}"{% endif %}>
        {% if isAccordion %}
          <button class="faq-trigger" onclick="toggleAccordion(this)">
            <span class="question-text">{{ item.question | markdown | safe }}</span>
            <span class="accordion-icon">‚ñº</span>
            <div class="admin-indicators" style="display: {{ 'block' if componentData.showAdminIndicators else 'none' }};">
              <span class="status-indicator status-{{ item.status }}"></span>
            </div>
          </button>
        {% else %}
          <a href="{{ item.url or item.permalink }}" class="faq-trigger">
            <span class="question-text">
              {{ item.question | markdown | safe }}
              <div class="admin-indicators" style="display: {{ 'block' if componentData.showAdminIndicators else 'none' }};">
                <span class="status-indicator status-{{ item.status }}"></span>
              </div>
            </span>
          </a>
        {% endif %}

        {% if isAccordion %}
          <div class="faq-content">
            <div class="faq-answer">
              {{ item.answer | markdown | safe }}

              {% if item.status == "draft" or item.guidanceItem %}
              <aside class="faq-warnings">
                {% if item.status == "draft" %}
                <div class="faq-warning">
                  <p><strong>This FAQ is a draft</strong> - it hasn't been reviewed by the FAQ Task Force. The answer may be incomplete or incorrect.</p>
                </div>
                {% endif %}

                {% if item.guidanceItem %}
                <div class="faq-warning faq-guidance">
                  <p><strong>Pending Guidance</strong></p>
                  {% if item.guidanceItem.guidanceText %}
                    <div class="guidance-content">
                      <p>This FAQ awaits commission guidance on:</p>
                      <p class="guidance-phrase">{{ item.guidanceItem.guidanceText | truncate(300) }}</p>
                    </div>
                    <div class="guidance-actions">
                      <a href="{{ item.guidanceItem.permalink }}" class="guidance-link">View full guidance request ‚Üí</a>
                    </div>
                  {% else %}
                    <p>This FAQ awaits commission guidance.</p>
                  {% endif %}
                </div>
                {% endif %}
              </aside>
              {% endif %}
            </div>

            <div class="faq-admin-info" style="display: {{ 'block' if componentData.showAdminIndicators else 'none' }};">
              {% if item["guidance-id"] %}
              <div class="pending-guidance-link">
                <strong>üõë Related Pending Guidance:</strong> <a href="{{ item.guidanceItem.permalink }}">{{ item["guidance-id"] | replace('-', ' ') | title }}</a>
                <p><em>This FAQ is affected by pending guidance that is currently being developed.</em></p>
              </div>
              {% endif %}

              {% if item["Related issue"] %}
              <div class="related-issue">
                <strong>Related issue:</strong> <a href="{{ item["Related issue"] }}">{{ item["Related issue"] }}</a>
              </div>
              {% endif %}

              <div class="edit-on-github">
                <span class="edit-icon">‚úèÔ∏è</span>
                <a href="https://github.com/orcwg/cra-hub/edit/main/faq/{{ item.category }}/{{ item.filename }}" target="_blank" rel="noopener">Edit this FAQ on GitHub</a>
              </div>

              <div class="faq-link">
                <a href="{{ item.url or item.permalink }}" class="standalone-link">üìÑ View standalone page</a>
              </div>
            </div>
          </div>
        {% endif %}
      </div>
    {% endfor %}
  </div>
</section>
